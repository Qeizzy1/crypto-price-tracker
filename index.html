import React, { useState, useEffect } from "react";

const generateFakeCoins = (num) => {
  const coins = [];
  for (let i = 1; i <= num; i++) {
    coins.push({
      id: i,
      symbol: `COIN${i}`,
      name: `Coin ${i}`,
      price: (Math.random() * 100).toFixed(2),
      changePercent: (Math.random() * 20 - 10).toFixed(2), // -10% to +10%
      expectedUpPercent: (Math.random() * 15).toFixed(2), // 0% to +15%
    });
  }
  return coins;
};

export default function DexScreenerUI() {
  const [coins, setCoins] = useState([]);
  const [selectedCoin, setSelectedCoin] = useState(null);

  useEffect(() => {
    const fakeCoins = generateFakeCoins(100);
    setCoins(fakeCoins);
  }, []);

  return (
    <div style={{ fontFamily: "Arial, sans-serif", maxWidth: 900, margin: "auto", padding: 20 }}>
      <h1 style={{ textAlign: "center" }}>Dexscreener - Coin List</h1>

      <div style={{ display: "flex", gap: 20 }}>
        {/* Coin List */}
        <div
          style={{
            flex: 1,
            maxHeight: "70vh",
            overflowY: "scroll",
            border: "1px solid #ddd",
            borderRadius: 8,
          }}
        >
          <table style={{ width: "100%", borderCollapse: "collapse" }}>
            <thead style={{ backgroundColor: "#f4f4f4" }}>
              <tr>
                <th style={{ padding: 8, borderBottom: "1px solid #ccc" }}>Symbol</th>
                <th style={{ padding: 8, borderBottom: "1px solid #ccc" }}>Price</th>
                <th style={{ padding: 8, borderBottom: "1px solid #ccc" }}>Change %</th>
              </tr>
            </thead>
            <tbody>
              {coins.map((coin) => (
                <tr
                  key={coin.id}
                  style={{
                    cursor: "pointer",
                    backgroundColor: selectedCoin?.id === coin.id ? "#def" : "transparent",
                  }}
                  onClick={() => setSelectedCoin(coin)}
                >
                  <td style={{ padding: 8, borderBottom: "1px solid #eee" }}>{coin.symbol}</td>
                  <td style={{ padding: 8, borderBottom: "1px solid #eee" }}>${coin.price}</td>
                  <td
                    style={{
                      padding: 8,
                      borderBottom: "1px solid #eee",
                      color: coin.changePercent >= 0 ? "green" : "red",
                    }}
                  >
                    {coin.changePercent}%
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>

        {/* Coin Details */}
        <div
          style={{
            flex: 1,
            border: "1px solid #ddd",
            borderRadius: 8,
            padding: 20,
            minHeight: "70vh",
          }}
        >
          {selectedCoin ? (
            <>
              <h2>
                {selectedCoin.name} ({selectedCoin.symbol})
              </h2>
              <p>
                <strong>Current Price:</strong> ${selectedCoin.price}
              </p>
              <p>
                <strong>Gone up:</strong>{" "}
                <span style={{ color: selectedCoin.changePercent >= 0 ? "green" : "red" }}>
                  {selectedCoin.changePercent}%
                </span>
              </p>
              <p>
                <strong>Expected to go up:</strong>{" "}
                <span style={{ color: "blue" }}>{selectedCoin.expectedUpPercent}%</span>
              </p>
            </>
          ) : (
            <p style={{ color: "#555" }}>Click a coin to see details</p>
          )}
        </div>
      </div>
    </div>
  );
}
