import React, { useState } from "react";

export default function DexscreenerClone({ coins }) {
  const [selectedCoin, setSelectedCoin] = useState(null);

  return (
    <div
      style={{
        height: "100vh",
        display: "flex",
        fontFamily:
          "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",
        backgroundColor: "#0e1117",
        color: "#cfd8dc",
        userSelect: "none",
      }}
    >
      {/* Sidebar */}
      <div
        style={{
          width: 320,
          borderRight: "1px solid #21262d",
          backgroundColor: "#161b22",
          display: "flex",
          flexDirection: "column",
        }}
      >
        <div
          style={{
            padding: "1rem 1.5rem",
            borderBottom: "1px solid #21262d",
            fontWeight: "700",
            fontSize: "1.25rem",
            color: "#58a6ff",
          }}
        >
          Dexscreener
        </div>

        <div
          style={{
            flexGrow: 1,
            overflowY: "auto",
          }}
        >
          <table
            style={{
              width: "100%",
              borderCollapse: "collapse",
              color: "#c9d1d9",
              fontSize: "0.875rem",
            }}
          >
            <thead>
              <tr
                style={{
                  textAlign: "left",
                  borderBottom: "1px solid #21262d",
                  color: "#8b949e",
                  fontWeight: "600",
                }}
              >
                <th style={{ padding: "0.75rem 1rem" }}>Symbol</th>
                <th style={{ padding: "0.75rem 1rem", textAlign: "right" }}>
                  Price
                </th>
                <th style={{ padding: "0.75rem 1rem", textAlign: "right" }}>
                  24h %
                </th>
              </tr>
            </thead>
            <tbody>
              {coins && coins.length > 0 ? (
                coins.map((coin) => {
                  const isSelected = selectedCoin?.id === coin.id;
                  return (
                    <tr
                      key={coin.id || coin.symbol}
                      onClick={() => setSelectedCoin(coin)}
                      style={{
                        cursor: "pointer",
                        backgroundColor: isSelected ? "#21262d" : "transparent",
                        transition: "background-color 0.15s ease",
                      }}
                      onMouseEnter={(e) => {
                        if (!isSelected)
                          e.currentTarget.style.backgroundColor = "#161b22";
                      }}
                      onMouseLeave={(e) => {
                        if (!isSelected)
                          e.currentTarget.style.backgroundColor = "transparent";
                      }}
                    >
                      <td style={{ padding: "0.75rem 1rem", fontWeight: isSelected ? "700" : "400" }}>
                        {coin.symbol}
                      </td>
                      <td
                        style={{
                          padding: "0.75rem 1rem",
                          textAlign: "right",
                          fontWeight: "400",
                        }}
                      >
                        ${parseFloat(coin.price).toFixed(4)}
                      </td>
                      <td
                        style={{
                          padding: "0.75rem 1rem",
                          textAlign: "right",
                          fontWeight: "600",
                          color:
                            parseFloat(coin.changePercent) >= 0
                              ? "#3fb950"
                              : "#f85149",
                        }}
                      >
                        {parseFloat(coin.changePercent).toFixed(2)}%
                      </td>
                    </tr>
                  );
                })
              ) : (
                <tr>
                  <td
                    colSpan={3}
                    style={{
                      padding: "2rem",
                      textAlign: "center",
                      color: "#8b949e",
                    }}
                  >
                    No coins data
                  </td>
                </tr>
              )}
            </tbody>
          </table>
        </div>
      </div>

      {/* Main detail panel */}
      <div
        style={{
          flexGrow: 1,
          padding: "2rem",
          backgroundColor: "#161b22",
          display: "flex",
          flexDirection: "column",
          justifyContent: "center",
          alignItems: "center",
          color: "#c9d1d9",
        }}
      >
        {!selectedCoin ? (
          <p
            style={{
              fontSize: "1.25rem",
              color: "#8b949e",
              userSelect: "none",
            }}
          >
            Select a coin from the list
          </p>
        ) : (
          <div
            style={{
              maxWidth: 480,
              backgroundColor: "#21262d",
              borderRadius: 12,
              padding: "2rem 3rem",
              boxShadow: "0 10px 20px rgba(0,0,0,0.3)",
              textAlign: "center",
            }}
          >
            <h1
              style={{
                fontSize: "3rem",
                marginBottom: "0.25rem",
                color: "#58a6ff",
              }}
            >
              {selectedCoin.symbol}
            </h1>
            <h3
              style={{
                marginTop: 0,
                marginBottom: "1.5rem",
                color: "#8b949e",
                fontWeight: "400",
              }}
            >
              {selectedCoin.name}
            </h3>
            <p
              style={{
                fontSize: "1.25rem",
                marginBottom: "1rem",
              }}
            >
              <strong>Current Price:</strong>{" "}
              <span style={{ fontWeight: "700" }}>
                ${parseFloat(selectedCoin.price).toFixed(4)}
              </span>
            </p>
            <p
              style={{
                fontSize: "1.5rem",
                marginBottom: "0.75rem",
                color:
                  parseFloat(selectedCoin.changePercent) >= 0
                    ? "#3fb950"
                    : "#f85149",
                fontWeight: "700",
              }}
            >
              Gone up: {parseFloat(selectedCoin.changePercent).toFixed(2)}%
            </p>
            <p
              style={{
                fontSize: "1.5rem",
                fontWeight: "700",
                color: "#79c0ff",
              }}
            >
              Expected to go up:{" "}
              {selectedCoin.expectedUpPercent
                ? `${parseFloat(selectedCoin.expectedUpPercent).toFixed(2)}%`
                : "N/A"}
            </p>
          </div>
        )}
      </div>
    </div>
  );
}
