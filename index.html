<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VexApi - Crypto Insights</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&display=swap');

    body {
      margin: 0;
      background: #fff;
      font-family: 'Poppins', sans-serif;
      color: #d32f2f; /* Strong red */
      user-select: none;
      padding: 30px 20px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    h1 {
      text-align: center;
      font-weight: 700;
      font-size: 3rem;
      margin-bottom: 40px;
      letter-spacing: 2px;
      color: #d32f2f;
      text-transform: uppercase;
      user-select: none;
    }

    .container {
      display: flex;
      justify-content: space-between;
      gap: 24px;
      max-width: 1250px;
      margin: 0 auto;
    }

    table {
      border-collapse: separate;
      border-spacing: 0 10px;
      width: 100%;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 3px 8px rgb(211 47 47 / 0.15);
      overflow: hidden;
      user-select: none;
    }

    thead tr {
      background: #d32f2f;
      color: #fff;
      font-weight: 700;
      font-size: 1.1rem;
      text-transform: uppercase;
      user-select: none;
    }

    thead th {
      padding: 14px 16px;
      text-align: left;
    }

    tbody tr {
      background: #fff;
      cursor: default;
      transition: background-color 0.2s ease;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgb(211 47 47 / 0.1);
    }

    tbody tr:hover {
      background-color: #fdecea;
      box-shadow: 0 4px 12px rgb(211 47 47 / 0.25);
    }

    tbody td {
      padding: 14px 16px;
      font-weight: 600;
      font-size: 0.95rem;
      color: #b71c1c;
    }

    .coin-name {
      font-weight: 700;
      color: #d32f2f;
    }

    .price-change {
      font-weight: 700;
      text-align: right;
      color: #d32f2f;
      user-select: none;
    }

    .price-change.up {
      color: #388e3c; /* green */
    }

    /* Responsive */
    @media (max-width: 1100px) {
      .container {
        flex-direction: column;
      }
      table {
        margin-bottom: 30px;
      }
    }
  </style>
</head>
<body>
  <h1>moonLive</h1>
  <div class="container">
    <table aria-label="Newly Created Coins">
      <thead>
        <tr><th colspan="2">Newly Created Coins</th></tr>
        <tr><th>Name</th><th>Market Cap</th></tr>
      </thead>
      <tbody id="newlyCreatedBody">
        <tr><td colspan="2" style="text-align:center;">Loading...</td></tr>
      </tbody>
    </table>

    <table aria-label="Coins About to Pump">
      <thead>
        <tr><th colspan="2">Coins About to Pump</th></tr>
        <tr><th>Name</th><th>24h Change (%)</th></tr>
      </thead>
      <tbody id="pumpBody">
        <tr><td colspan="2" style="text-align:center;">Loading...</td></tr>
      </tbody>
    </table>

    <table aria-label="Coins with Market Cap over 50k">
      <thead>
        <tr><th colspan="2">Market Cap &gt; 50k</th></tr>
        <tr><th>Name</th><th>Market Cap</th></tr>
      </thead>
      <tbody id="marketCapBody">
        <tr><td colspan="2" style="text-align:center;">Loading...</td></tr>
      </tbody>
    </table>
  </div>

<script>
  async function fetchCoins() {
    try {
      const url = `https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=250&page=1&price_change_percentage=24h`;
      const res = await fetch(url);
      const data = await res.json();
      return data;
    } catch (e) {
      console.error('Failed to fetch data:', e);
      return null;
    }
  }

  function formatNumber(num) {
    if (!num) return '-';
    return num.toLocaleString(undefined, {maximumFractionDigits: 0});
  }

  async function populateTables() {
    const data = await fetchCoins();
    if (!data) {
      document.getElementById('newlyCreatedBody').innerHTML = `<tr><td colspan="2" style="color:#d32f2f; text-align:center;">Failed to load</td></tr>`;
      document.getElementById('pumpBody').innerHTML = `<tr><td colspan="2" style="color:#d32f2f; text-align:center;">Failed to load</td></tr>`;
      document.getElementById('marketCapBody').innerHTML = `<tr><td colspan="2" style="color:#d32f2f; text-align:center;">Failed to load</td></tr>`;
      return;
    }

    const newlyCreated = data
      .filter(c => c.market_cap && c.market_cap < 500000)
      .slice(0, 15);

    const pumpCoins = data
      .filter(c => c.price_change_percentage_24h && c.price_change_percentage_24h > 15)
      .slice(0, 15);

    const marketCapCoins = data
      .filter(c => c.market_cap && c.market_cap > 50000)
      .slice(0, 15);

    const newlyBody = document.getElementById('newlyCreatedBody');
    newlyBody.innerHTML = '';
    newlyCreated.forEach(coin => {
      const tr = document.createElement('tr');
      const tdName = document.createElement('td');
      tdName.textContent = coin.name;
      tdName.className = 'coin-name';
      const tdMc = document.createElement('td');
      tdMc.textContent = `$${formatNumber(coin.market_cap)}`;
      tr.appendChild(tdName);
      tr.appendChild(tdMc);
      newlyBody.appendChild(tr);
    });

    const pumpBody = document.getElementById('pumpBody');
    pumpBody.innerHTML = '';
    pumpCoins.forEach(coin => {
      const tr = document.createElement('tr');
      const tdName = document.createElement('td');
      tdName.textContent = coin.name;
      tdName.className = 'coin-name';
      const tdChange = document.createElement('td');
      tdChange.textContent = coin.price_change_percentage_24h.toFixed(2) + '%';
      tdChange.className = 'price-change up';
      tr.appendChild(tdName);
      tr.appendChild(tdChange);
      pumpBody.appendChild(tr);
    });

    const mcBody = document.getElementById('marketCapBody');
    mcBody.innerHTML = '';
    marketCapCoins.forEach(coin => {
      const tr = document.createElement('tr');
      const tdName = document.createElement('td');
      tdName.textContent = coin.name;
      tdName.className = 'coin-name';
      const tdMc = document.createElement('td');
      tdMc.textContent = `$${formatNumber(coin.market_cap)}`;
      tr.appendChild(tdName);
      tr.appendChild(tdMc);
      mcBody.appendChild(tr);
    });
  }

  populateTables();
  setInterval(populateTables, 30000);
</script>

</body>
</html>
