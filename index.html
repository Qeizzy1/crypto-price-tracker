<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VexApi Pro - Enhanced Crypto Tracker + Login</title>
  <style>
    /* Reset & basics */
    * {
      box-sizing: border-box;
      margin: 0; padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
      background: linear-gradient(135deg, #0b1120, #121720);
      color: #a0d8f7;
      min-height: 100vh;
      padding: 15px 20px 50px;
      transition: background-color 0.3s ease, color 0.3s ease;
      user-select: none;
    }
    body.light-mode {
      background: #f0f5ff;
      color: #222d44;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      user-select: none;
    }
    header h1 {
      font-size: 2.5rem;
      color: #38c7ff;
      text-shadow: 0 0 8px #1de9b6, 0 0 16px #38c7ff;
      cursor: default;
      user-select: text;
    }
    .top-controls {
      display: flex;
      gap: 15px;
      align-items: center;
      flex-wrap: wrap;
    }
    button, select {
      cursor: pointer;
      border: none;
      padding: 8px 14px;
      font-weight: 700;
      border-radius: 12px;
      background: #263544cc;
      color: #80e8ffcc;
      box-shadow: 0 0 6px #1aeaffaa;
      transition: background 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
      user-select: none;
      font-size: 1rem;
    }
    button:hover, select:hover {
      background: #1c2a3bdd;
      color: #00f4ff;
      box-shadow: 0 0 20px #00fff7dd;
    }
    button:disabled {
      background: #444c5c;
      color: #677e96;
      cursor: not-allowed;
      box-shadow: none;
    }
    #search {
      padding: 12px 16px;
      font-size: 1rem;
      border-radius: 12px;
      border: none;
      background: #112133;
      color: #6bf3ff;
      box-shadow:
        inset 0 0 8px #00ffe7aa,
        0 0 10px #00e2ff44;
      transition: box-shadow 0.3s ease;
      width: 280px;
      max-width: 90vw;
      user-select: text;
    }
    #search:focus {
      outline: none;
      box-shadow:
        inset 0 0 12px #00ffe7ee,
        0 0 25px #00e2ffbb;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 0 25px #00ffe7aa;
      user-select: none;
    }
    thead {
      background: #0f1829;
      user-select: none;
    }
    th, td {
      padding: 12px 15px;
      text-align: left;
      font-size: 1rem;
      color: #a0d8f7;
    }
    th {
      cursor: pointer;
      user-select: none;
      position: relative;
      transition: color 0.3s ease;
    }
    th:hover {
      color: #00ffe7;
    }
    th.sort-asc::after {
      content: '▲';
      position: absolute;
      right: 10px;
      color: #00ffe7;
      font-size: 0.75rem;
    }
    th.sort-desc::after {
      content: '▼';
      position: absolute;
      right: 10px;
      color: #00ffe7;
      font-size: 0.75rem;
    }
    tr:nth-child(even) {
      background: #0b1220;
    }
    tr:hover {
      background: #112933dd;
    }
    .price-up {
      color: #33ff99;
      text-shadow: 0 0 6px #33ff99aa;
      user-select: text;
    }
    .price-down {
      color: #ff3366;
      text-shadow: 0 0 6px #ff3366aa;
      user-select: text;
    }
    .coin-link {
      background: #263544cc;
      color: #80e8ffcc;
      text-decoration: none;
      padding: 8px 14px;
      border-radius: 12px;
      font-weight: 700;
      font-size: 0.9rem;
      box-shadow: 0 0 6px #1aeaffaa;
      transition:
        background 0.3s ease,
        color 0.3s ease,
        box-shadow 0.3s ease;
      user-select: none;
      display: inline-block;
    }
    .coin-link:hover {
      background: #1c2a3bdd;
      color: #00f4ff;
      box-shadow: 0 0 20px #00fff7dd;
    }
    .pagination {
      margin-top: 15px;
      text-align: center;
      user-select: none;
    }
    .pagination button {
      margin: 0 5px;
      min-width: 36px;
      font-size: 1.1rem;
    }
    #loading-spinner {
      width: 50px;
      height: 50px;
      border: 5px solid #112133;
      border-top: 5px solid #00ffe7;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 30px auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg);}
      100% { transform: rotate(360deg);}
    }
    /* Watchlist */
    .watch-btn {
      background: transparent;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #444c5c;
      transition: color 0.3s ease;
      user-select: none;
    }
    .watch-btn.active {
      color: #00ffe7;
      text-shadow: 0 0 8px #00ffe7bb;
    }
    .watch-btn:hover {
      color: #00ffe7;
    }
    /* Alerts input */
    #alert-input {
      width: 80px;
      padding: 6px 10px;
      border-radius: 10px;
      border: none;
      background: #112133;
      color: #6bf3ff;
      box-shadow:
        inset 0 0 8px #00ffe7aa,
        0 0 10px #00e2ff44;
      transition: box-shadow 0.3s ease;
      user-select: text;
      font-size: 0.9rem;
      margin-left: 5px;
    }
    #alert-input:focus {
      outline: none;
      box-shadow:
        inset 0 0 12px #00ffe7ee,
        0 0 25px #00e2ffbb;
    }
    /* Chain filter dropdown */
    #chain-filter {
      width: 140px;
    }
    /* Modal */
    #modal {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.85);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      user-select: none;
    }
    #modal.active {
      display: flex;
    }
    #modal-content {
      background: #112132ee;
      padding: 20px;
      border-radius: 16px;
      max-width: 650px;
      width: 90vw;
      max-height: 90vh;
      overflow-y: auto;
      color: #a0d8f7;
      user-select: text;
      box-shadow: 0 0 30px #00ffe7bb;
      position: relative;
    }
    #modal-close {
      position: absolute;
      top: 12px;
      right: 12px;
      cursor: pointer;
      font-weight: 700;
      font-size: 1.5rem;
      color: #33ffcc;
      user-select: none;
    }
    #modal-close:hover {
      color: #00ffe7;
    }
    #modal h2 {
      margin-bottom: 12px;
      color: #00ffe7;
    }
    #modal .details {
      font-size: 0.9rem;
      margin-bottom: 15px;
      line-height: 1.4;
    }
    #modal canvas {
      width: 100% !important;
      height: 260px !important;
      user-select: none;
    }
    /* Login/signup UI */
    #auth-container {
      background: #112132cc;
      border-radius: 16px;
      padding: 20px 25px;
      width: 320px;
      max-width: 90vw;
      box-shadow: 0 0 25px #00ffe7aa;
      color: #a0d8f7;
      position: fixed;
      top: 80px;
      right: 20px;
      user-select: none;
      display: none;
      flex-direction: column;
      z-index: 10000;
    }
    #auth-container.active {
      display: flex;
    }
    #auth-container h3 {
      margin-bottom: 14px;
      color: #00ffe7;
      text-align: center;
    }
    #auth-container label {
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 6px;
      user-select: text;
    }
    #auth-container input {
      margin-bottom: 15px;
      padding: 10px;
      font-size: 1rem;
      border-radius: 12px;
      border: none;
      background: #112133;
      color: #6bf3ff;
      box-shadow:
        inset 0 0 8px #00ffe7aa,
        0 0 10px #00e2ff44;
      user-select: text;
      transition: box-shadow 0.3s ease;
      width: 100%;
    }
    #auth-container input:focus {
      outline: none;
      box-shadow:
        inset 0 0 12px #00ffe7ee,
        0 0 25px #00e2ffbb;
    }
    #auth-container button {
      background: #00bfffcc;
      font-weight: 700;
      color: #012b3d;
      padding: 10px 0;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      box-shadow: 0 0 20px #00bfffaa;
      transition: background 0.3s ease;
      user-select: none;
    }
    #auth-container button:hover {
      background: #0099ddcc;
    }
    #auth-toggle-btn {
      cursor: pointer;
      background: transparent;
      border: 2px solid #00ffe7;
      color: #00ffe7;
      border-radius: 14px;
      padding: 8px 16px;
      font-weight: 700;
      font-size: 1rem;
      box-shadow: 0 0 12px #00ffe7bb;
      user-select: none;
      transition: background 0.3s ease, color 0.3s ease;
    }
    #auth-toggle-btn:hover {
      background: #00ffe7;
      color: #112132;
    }
    #dark-toggle-btn {
      background: transparent;
      border: 2px solid #80e8ffcc;
      color: #80e8ffcc;
      border-radius: 14px;
      padding: 8px 16px;
      font-weight: 700;
      font-size: 1rem;
      box-shadow: 0 0 12px #00eaffbb;
      user-select: none;
      transition: background 0.3s ease, color 0.3s ease;
    }
    #dark-toggle-btn:hover {
      background: #00eaffcc;
      color: #112132;
    }
  </style>
</head>
<body>

<header>
  <h1>VexApi Pro</h1>
  <div class="top-controls">
    <button id="dark-toggle-btn" aria-label="Toggle Dark/Light Mode">Dark Mode</button>
    <button id="auth-toggle-btn" aria-label="Toggle Login/Signup">Login / Signup</button>
  </div>
</header>

<div class="top-controls" style="margin-bottom: 20px; gap: 10px; flex-wrap: wrap;">
  <input type="text" id="search" placeholder="Search coins by name or symbol..." autocomplete="off" />
  <select id="sort-select" title="Sort coins">
    <option value="market_cap_desc">Sort: Market Cap ▼</option>
    <option value="market_cap_asc">Sort: Market Cap ▲</option>
    <option value="price_desc">Sort: Price ▼</option>
    <option value="price_asc">Sort: Price ▲</option>
    <option value="change_desc">Sort: 24h Change ▼</option>
    <option value="change_asc">Sort: 24h Change ▲</option>
    <option value="name_asc">Sort: Name A-Z</option>
    <option value="name_desc">Sort: Name Z-A</option>
  </select>
  <select id="chain-filter" title="Filter by Chain">
    <option value="all">Chain: All</option>
    <option value="ethereum">Ethereum</option>
    <option value="binance-smart-chain">Binance Smart Chain</option>
    <option value="solana">Solana</option>
    <option value="polygon">Polygon</option>
  </select>
  <button id="trending-btn" title="Show Trending Coins">Trending 🔥</button>
</div>

<div id="loading-spinner"></div>

<table id="coins-table" style="display:none;">
  <thead>
    <tr>
      <th data-key="watchlist" style="width:40px;">★</th>
      <th data-key="name">Name</th>
      <th data-key="symbol">Symbol</th>
      <th data-key="price">Price</th>
      <th data-key="change">24h Change</th>
      <th data-key="market_cap">Market Cap</th>
      <th data-key="volume_24h">24h Volume</th>
      <th>Chain</th>
      <th>Link</th>
      <th>Alert $</th>
    </tr>
  </thead>
  <tbody id="coin-tbody"></tbody>
</table>

<div class="pagination" id="pagination"></div>

<!-- Modal for Coin Details -->
<div id="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-desc">
  <div id="modal-content">
    <span id="modal-close" aria-label="Close Modal" tabindex="0" role="button">×</span>
    <h2 id="modal-title">Loading...</h2>
    <div class="details" id="modal-desc"></div>
    <canvas id="chart" aria-label="Price Chart" role="img"></canvas>
  </div>
</div>

<!-- Login/Signup UI -->
<div id="auth-container" aria-hidden="true">
  <h3 id="auth-title">Login</h3>
  <form id="auth-form">
    <label for="email-input">Email:</label>
    <input type="email" id="email-input" required autocomplete="username" />
    <label for="password-input">Password:</label>
    <input type="password" id="password-input" required autocomplete="current-password" />
    <button type="submit" id="auth-submit-btn">Login</button>
  </form>
  <p style="margin-top:10px; text-align:center; font-size:0.9rem; color:#55aaff; cursor:pointer;" id="toggle-auth-mode">Don't have an account? Signup</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // === Variables & state ===
  let coins = [];
  let filteredCoins = [];
  let watchlist = JSON.parse(localStorage.getItem('vexapi-watchlist') || '[]');
  let alerts = JSON.parse(localStorage.getItem('vexapi-alerts') || '{}');
  let currentPage = 1;
  const coinsPerPage = 50;
  let sortKey = 'market_cap';
  let sortOrder = 'desc';
  let trendingOnly = false;
  let chainFilter = 'all';
  let isLightMode = false;
  let authMode = 'login'; // or 'signup'

  const spinner = document.getElementById('loading-spinner');
  const table = document.getElementBy
